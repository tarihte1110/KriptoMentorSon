{"ast":null,"code":"// src/pages/PublicProfilePage.js\nimport React,{useEffect,useState,useContext}from'react';import{useParams,useNavigate}from'react-router-dom';import{supabase}from'../lib/supabaseClient';import{avatarList}from'../utils/avatars';import{SignalsContext}from'../context/SignalsContext';import'./PublicProfilePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PublicProfilePage(){const{userId}=useParams();const navigate=useNavigate();const{signals:allSignals}=useContext(SignalsContext);const[profile,setProfile]=useState(null);const[signals,setSignals]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const load=async()=>{setLoading(true);// 1) Profil verisini √ßek\nconst{data:prof,error:profErr}=await supabase.from('profiles').select('full_name, bio, avatar_url, created_at').eq('user_id',userId).maybeSingle();if(profErr){console.error(profErr);navigate('/',{replace:true});return;}setProfile(prof||{full_name:'',bio:'',avatar_url:'',created_at:new Date()});// 2) Sinyalleri SignalsContext'ten filtrele\nconst userSignals=allSignals.filter(s=>s.userId===userId);setSignals(userSignals);setLoading(false);};load();},[userId,allSignals,navigate]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"public-profile loader\",children:\"Y\\xFCkleniyor\\u2026\"});}// avatar kaynaƒüƒ±\nconst avatarItem=avatarList.find(a=>a.id===profile.avatar_url);const avatarSrc=avatarItem===null||avatarItem===void 0?void 0:avatarItem.image;return/*#__PURE__*/_jsxs(\"div\",{className:\"public-profile\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate(-1),children:\"\\u2190 Geri\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[avatarSrc?/*#__PURE__*/_jsx(\"img\",{src:avatarSrc,alt:\"Avatar\",className:\"avatar-img\"}):/*#__PURE__*/_jsx(\"div\",{className:\"avatar-placeholder\",children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"name\",children:profile.full_name||'KriptoMentor Kullanƒ±cƒ±sƒ±'}),profile.bio&&/*#__PURE__*/_jsx(\"p\",{className:\"bio\",children:profile.bio}),/*#__PURE__*/_jsxs(\"p\",{className:\"joined\",children:[\"Kat\\u0131l\\u0131m: \",new Date(profile.created_at).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"signals-title\",children:\"Payla\\u015Ft\\u0131\\u011F\\u0131 Sinyaller\"}),signals.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty\",children:\"Hen\\xFCz sinyal payla\\u015Fmam\\u0131\\u015F.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"signals-list\",children:signals.map(item=>{var _item$timeFrame;const d=new Date(item.timestamp);const dateStr=d.toLocaleDateString();const timeStr=d.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});return/*#__PURE__*/_jsxs(\"li\",{className:\"signal-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"symbol\",children:item.symbol}),/*#__PURE__*/_jsxs(\"span\",{className:\"timestamp\",children:[dateStr,\" \",timeStr]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:`badge ${item.direction==='LONG'?'long':'short'}`,children:item.direction}),/*#__PURE__*/_jsx(\"span\",{className:\"badge timeframe\",children:(_item$timeFrame=item.timeFrame)===null||_item$timeFrame===void 0?void 0:_item$timeFrame.toUpperCase()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Entry Price\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:item.entryPrice})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Leverage\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[item.recommendedLeverage,\"x\"]})]}),item.targets.map((t,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"label\",children:[\"Target \",i+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"value target\",children:t})]},i)),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Stop Loss\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value stop\",children:item.stopLoss})]})]})]},item.id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","useNavigate","supabase","avatarList","SignalsContext","jsx","_jsx","jsxs","_jsxs","PublicProfilePage","userId","navigate","signals","allSignals","profile","setProfile","setSignals","loading","setLoading","load","data","prof","error","profErr","from","select","eq","maybeSingle","console","replace","full_name","bio","avatar_url","created_at","Date","userSignals","filter","s","className","children","avatarItem","find","a","id","avatarSrc","image","onClick","src","alt","toLocaleDateString","length","map","item","_item$timeFrame","d","timestamp","dateStr","timeStr","toLocaleTimeString","hour","minute","symbol","direction","timeFrame","toUpperCase","entryPrice","recommendedLeverage","targets","t","i","stopLoss"],"sources":["C:/Users/Yusuf Uygur/Documents/GitHub/KriptoMentorSon/kriptoMentorWeb/frontend/src/pages/PublicProfilePage.js"],"sourcesContent":["// src/pages/PublicProfilePage.js\r\n\r\nimport React, { useEffect, useState, useContext } from 'react';\r\nimport { useParams, useNavigate }     from 'react-router-dom';\r\nimport { supabase }                   from '../lib/supabaseClient';\r\nimport { avatarList }                 from '../utils/avatars';\r\nimport { SignalsContext }             from '../context/SignalsContext';\r\nimport './PublicProfilePage.css';\r\n\r\nexport default function PublicProfilePage() {\r\n  const { userId } = useParams();\r\n  const navigate   = useNavigate();\r\n  const { signals: allSignals } = useContext(SignalsContext);\r\n\r\n  const [profile, setProfile] = useState(null);\r\n  const [signals, setSignals] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      setLoading(true);\r\n      // 1) Profil verisini √ßek\r\n      const { data: prof, error: profErr } = await supabase\r\n        .from('profiles')\r\n        .select('full_name, bio, avatar_url, created_at')\r\n        .eq('user_id', userId)\r\n        .maybeSingle();\r\n      if (profErr) {\r\n        console.error(profErr);\r\n        navigate('/', { replace: true });\r\n        return;\r\n      }\r\n      setProfile(prof || { full_name: '', bio: '', avatar_url: '', created_at: new Date() });\r\n\r\n      // 2) Sinyalleri SignalsContext'ten filtrele\r\n      const userSignals = allSignals.filter(s => s.userId === userId);\r\n      setSignals(userSignals);\r\n\r\n      setLoading(false);\r\n    };\r\n    load();\r\n  }, [userId, allSignals, navigate]);\r\n\r\n  if (loading) {\r\n    return <div className=\"public-profile loader\">Y√ºkleniyor‚Ä¶</div>;\r\n  }\r\n\r\n  // avatar kaynaƒüƒ±\r\n  const avatarItem   = avatarList.find(a => a.id === profile.avatar_url);\r\n  const avatarSrc    = avatarItem?.image;\r\n\r\n  return (\r\n    <div className=\"public-profile\">\r\n      <button className=\"back-btn\" onClick={() => navigate(-1)}>\r\n        ‚Üê Geri\r\n      </button>\r\n      <div className=\"profile-header\">\r\n        {avatarSrc\r\n          ? <img src={avatarSrc} alt=\"Avatar\" className=\"avatar-img\"/>\r\n          : <div className=\"avatar-placeholder\">üë§</div>\r\n        }\r\n        <h2 className=\"name\">{profile.full_name || 'KriptoMentor Kullanƒ±cƒ±sƒ±'}</h2>\r\n        {profile.bio && <p className=\"bio\">{profile.bio}</p>}\r\n        <p className=\"joined\">\r\n          Katƒ±lƒ±m: {new Date(profile.created_at).toLocaleDateString()}\r\n        </p>\r\n      </div>\r\n\r\n      <h3 className=\"signals-title\">Payla≈ütƒ±ƒüƒ± Sinyaller</h3>\r\n      {signals.length === 0 ? (\r\n        <p className=\"empty\">Hen√ºz sinyal payla≈ümamƒ±≈ü.</p>\r\n      ) : (\r\n        <ul className=\"signals-list\">\r\n          {signals.map(item => {\r\n            const d = new Date(item.timestamp);\r\n            const dateStr = d.toLocaleDateString();\r\n            const timeStr = d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n            return (\r\n              <li key={item.id} className=\"signal-card\">\r\n                <div className=\"card-header\">\r\n                  <span className=\"symbol\">{item.symbol}</span>\r\n                  <span className=\"timestamp\">{dateStr} {timeStr}</span>\r\n                </div>\r\n                <div className=\"card-meta\">\r\n                  <span className={`badge ${item.direction === 'LONG' ? 'long' : 'short'}`}>\r\n                    {item.direction}\r\n                  </span>\r\n                  <span className=\"badge timeframe\">\r\n                    {item.timeFrame?.toUpperCase()}\r\n                  </span>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"row\">\r\n                    <span className=\"label\">Entry Price</span>\r\n                    <span className=\"value\">{item.entryPrice}</span>\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <span className=\"label\">Leverage</span>\r\n                    <span className=\"value\">{item.recommendedLeverage}x</span>\r\n                  </div>\r\n                  {item.targets.map((t,i) => (\r\n                    <div className=\"row\" key={i}>\r\n                      <span className=\"label\">Target {i+1}</span>\r\n                      <span className=\"value target\">{t}</span>\r\n                    </div>\r\n                  ))}\r\n                  <div className=\"row\">\r\n                    <span className=\"label\">Stop Loss</span>\r\n                    <span className=\"value stop\">{item.stopLoss}</span>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
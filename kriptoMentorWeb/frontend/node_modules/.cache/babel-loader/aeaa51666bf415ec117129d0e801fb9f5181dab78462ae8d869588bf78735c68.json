{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{supabase}from'../lib/supabaseClient';import{FaArrowLeft,FaPaperPlane,FaReply,FaTrash,FaEdit,FaCheck,FaTimes}from'react-icons/fa';import'./CommentsPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CommentsPage(){const{signalId}=useParams();const navigate=useNavigate();const[user,setUser]=useState(null);const[profile,setProfile]=useState(null);const[comments,setComments]=useState({roots:[],repliesMap:{}});const[newComment,setNewComment]=useState('');const[replyingTo,setReplyingTo]=useState(null);const[replyText,setReplyText]=useState('');const[editingId,setEditingId]=useState(null);const[editingText,setEditingText]=useState('');const[loading,setLoading]=useState(true);// silme modalı için\nconst[deleteTargetId,setDeleteTargetId]=useState(null);// --- 1) Oturum ve profil çek ---\nuseEffect(()=>{supabase.auth.getSession().then(_ref=>{let{data:{session}}=_ref;if(!(session!==null&&session!==void 0&&session.user))return navigate('/auth');setUser(session.user);return supabase.from('profiles').select('user_id, user_type, full_name').eq('user_id',session.user.id).maybeSingle();}).then(_ref2=>{let{data}=_ref2;return setProfile(data);}).catch(console.error);},[navigate]);// --- fetchComments fonksiyonu ---\nconst fetchComments=async()=>{if(!signalId)return;setLoading(true);try{const{data:raw,error}=await supabase.from('comments').select('id, user_id, content, created_at, parent_id').eq('signal_id',signalId).order('created_at',{ascending:true});if(error)throw error;const userIds=[...new Set(raw.map(c=>c.user_id))];const{data:profs}=await supabase.from('profiles').select('user_id, full_name').in('user_id',userIds);const nameMap={};profs.forEach(p=>nameMap[p.user_id]=p.full_name||'Anonim');const enriched=raw.map(c=>({...c,author:nameMap[c.user_id]}));const roots=enriched.filter(c=>!c.parent_id);const repliesMap={};enriched.forEach(c=>{if(c.parent_id){repliesMap[c.parent_id]=repliesMap[c.parent_id]||[];repliesMap[c.parent_id].push(c);}});setComments({roots,repliesMap});}catch(err){console.error(err);}finally{setLoading(false);}};// --- 2) İlk yüklemede çek ---\nuseEffect(()=>{fetchComments();},[signalId]);// --- 3) Yeni yorum ---\nconst postComment=async()=>{if(!newComment.trim())return;await supabase.from('comments').insert({signal_id:signalId,user_id:user.id,content:newComment.trim(),parent_id:null});setNewComment('');fetchComments();};// --- 4) Yeni cevap ---\nconst postReply=async()=>{if(!replyText.trim()||!replyingTo)return;await supabase.from('comments').insert({signal_id:signalId,user_id:user.id,content:replyText.trim(),parent_id:replyingTo});setReplyText('');setReplyingTo(null);fetchComments();};// --- 5) Düzenleme ---\nconst startEdit=c=>{setEditingId(c.id);setEditingText(c.content);};const saveEdit=async()=>{if(!editingText.trim())return setEditingId(null);await supabase.from('comments').update({content:editingText.trim()}).eq('id',editingId);setEditingId(null);setEditingText('');fetchComments();};// --- 6) Silme (modal üzerinden) ---\nconst confirmDelete=async()=>{if(!deleteTargetId)return;await supabase.from('comments').delete().eq('id',deleteTargetId);setDeleteTargetId(null);fetchComments();};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"comments-page loader\",children:\"Y\\xFCkleniyor\\u2026\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"comments-page\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"back-btn\",onClick:()=>navigate(-1),children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\" Geri\"]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Yorumlar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments-list\",children:[comments.roots.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"empty\",children:\"Hen\\xFCz yorum yok.\"}),comments.roots.map(c=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CommentItem,{comment:c,isReply:false,onReply:()=>setReplyingTo(c.id),onEdit:()=>startEdit(c),onDelete:()=>setDeleteTargetId(c.id),editingId:editingId,editingText:editingText,setEditingText:setEditingText,saveEdit:saveEdit,profile:profile}),replyingTo===c.id&&(profile===null||profile===void 0?void 0:profile.user_type)==='investor'&&/*#__PURE__*/_jsxs(\"div\",{className:\"new-reply\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Cevap yaz...\",value:replyText,onChange:e=>setReplyText(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:postReply,children:/*#__PURE__*/_jsx(FaPaperPlane,{})})]}),(comments.repliesMap[c.id]||[]).map(r=>/*#__PURE__*/_jsx(CommentItem,{comment:r,isReply:true,onReply:()=>setReplyingTo(r.id),onEdit:()=>startEdit(r),onDelete:()=>setDeleteTargetId(r.id),editingId:editingId,editingText:editingText,setEditingText:setEditingText,saveEdit:saveEdit,profile:profile},r.id))]},c.id))]}),(profile===null||profile===void 0?void 0:profile.user_type)==='investor'&&/*#__PURE__*/_jsxs(\"div\",{className:\"new-comment\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Yorum yaz...\",value:newComment,onChange:e=>setNewComment(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:postComment,children:/*#__PURE__*/_jsx(FaPaperPlane,{})})]}),deleteTargetId&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setDeleteTargetId(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Yorumu Sil\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Bu yorumu silmek istedi\\u011Finize emin misiniz?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"modal-btn cancel\",onClick:()=>setDeleteTargetId(null),children:\"\\u0130ptal\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-btn confirm\",onClick:confirmDelete,children:\"Sil\"})]})]})})]});}// Ayrık bir yorum kutusu bileşeni\nfunction CommentItem(_ref3){let{comment,isReply,onReply,onEdit,onDelete,editingId,editingText,setEditingText,saveEdit,profile}=_ref3;const time=new Date(comment.created_at).toLocaleDateString()+' '+new Date(comment.created_at).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});return/*#__PURE__*/_jsx(\"div\",{className:`comment-box${isReply?' reply':''}`,children:editingId===comment.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"edit-textarea\",value:editingText,onChange:e=>setEditingText(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingText(''),children:/*#__PURE__*/_jsx(FaTimes,{})}),/*#__PURE__*/_jsx(\"button\",{onClick:saveEdit,children:/*#__PURE__*/_jsx(FaCheck,{})})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"author\",children:comment.author}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:time})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-body\",children:comment.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-actions\",children:[(profile===null||profile===void 0?void 0:profile.user_type)==='investor'&&/*#__PURE__*/_jsxs(\"button\",{className:\"act\",onClick:onReply,children:[/*#__PURE__*/_jsx(FaReply,{}),\" Cevapla\"]}),comment.user_id===(profile===null||profile===void 0?void 0:profile.user_id)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"act\",onClick:onEdit,children:/*#__PURE__*/_jsx(FaEdit,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"act delete\",onClick:onDelete,children:/*#__PURE__*/_jsx(FaTrash,{})})]})]})]})});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","supabase","FaArrowLeft","FaPaperPlane","FaReply","FaTrash","FaEdit","FaCheck","FaTimes","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CommentsPage","signalId","navigate","user","setUser","profile","setProfile","comments","setComments","roots","repliesMap","newComment","setNewComment","replyingTo","setReplyingTo","replyText","setReplyText","editingId","setEditingId","editingText","setEditingText","loading","setLoading","deleteTargetId","setDeleteTargetId","auth","getSession","then","_ref","data","session","from","select","eq","id","maybeSingle","_ref2","catch","console","error","fetchComments","raw","order","ascending","userIds","Set","map","c","user_id","profs","in","nameMap","forEach","p","full_name","enriched","author","filter","parent_id","push","err","postComment","trim","insert","signal_id","content","postReply","startEdit","saveEdit","update","confirmDelete","delete","className","children","onClick","length","CommentItem","comment","isReply","onReply","onEdit","onDelete","user_type","placeholder","value","onChange","e","target","r","stopPropagation","_ref3","time","Date","created_at","toLocaleDateString","toLocaleTimeString","hour","minute"],"sources":["C:/Users/Yusuf Uygur/Documents/GitHub/KriptoMentorSon/kriptoMentorWeb/frontend/src/pages/CommentsPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate }     from 'react-router-dom';\r\nimport { supabase }                   from '../lib/supabaseClient';\r\nimport {\r\n  FaArrowLeft,\r\n  FaPaperPlane,\r\n  FaReply,\r\n  FaTrash,\r\n  FaEdit,\r\n  FaCheck,\r\n  FaTimes\r\n} from 'react-icons/fa';\r\nimport './CommentsPage.css';\r\n\r\nexport default function CommentsPage() {\r\n  const { signalId } = useParams();\r\n  const navigate     = useNavigate();\r\n\r\n  const [user, setUser]       = useState(null);\r\n  const [profile, setProfile] = useState(null);\r\n  const [comments, setComments] = useState({ roots: [], repliesMap: {} });\r\n  const [newComment, setNewComment] = useState('');\r\n  const [replyingTo, setReplyingTo] = useState(null);\r\n  const [replyText, setReplyText]   = useState('');\r\n  const [editingId, setEditingId]   = useState(null);\r\n  const [editingText, setEditingText] = useState('');\r\n  const [loading, setLoading]       = useState(true);\r\n\r\n  // silme modalı için\r\n  const [deleteTargetId, setDeleteTargetId] = useState(null);\r\n\r\n  // --- 1) Oturum ve profil çek ---\r\n  useEffect(() => {\r\n    supabase.auth.getSession()\r\n      .then(({ data:{ session } }) => {\r\n        if (!session?.user) return navigate('/auth');\r\n        setUser(session.user);\r\n        return supabase\r\n          .from('profiles')\r\n          .select('user_id, user_type, full_name')\r\n          .eq('user_id', session.user.id)\r\n          .maybeSingle();\r\n      })\r\n      .then(({ data }) => setProfile(data))\r\n      .catch(console.error);\r\n  }, [navigate]);\r\n\r\n  // --- fetchComments fonksiyonu ---\r\n  const fetchComments = async () => {\r\n    if (!signalId) return;\r\n    setLoading(true);\r\n    try {\r\n      const { data: raw, error } = await supabase\r\n        .from('comments')\r\n        .select('id, user_id, content, created_at, parent_id')\r\n        .eq('signal_id', signalId)\r\n        .order('created_at', { ascending: true });\r\n      if (error) throw error;\r\n\r\n      const userIds = [...new Set(raw.map(c => c.user_id))];\r\n      const { data: profs } = await supabase\r\n        .from('profiles')\r\n        .select('user_id, full_name')\r\n        .in('user_id', userIds);\r\n\r\n      const nameMap = {};\r\n      profs.forEach(p => (nameMap[p.user_id] = p.full_name || 'Anonim'));\r\n\r\n      const enriched = raw.map(c => ({\r\n        ...c,\r\n        author: nameMap[c.user_id]\r\n      }));\r\n\r\n      const roots = enriched.filter(c => !c.parent_id);\r\n      const repliesMap = {};\r\n      enriched.forEach(c => {\r\n        if (c.parent_id) {\r\n          repliesMap[c.parent_id] = repliesMap[c.parent_id] || [];\r\n          repliesMap[c.parent_id].push(c);\r\n        }\r\n      });\r\n\r\n      setComments({ roots, repliesMap });\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- 2) İlk yüklemede çek ---\r\n  useEffect(() => {\r\n    fetchComments();\r\n  }, [signalId]);\r\n\r\n  // --- 3) Yeni yorum ---\r\n  const postComment = async () => {\r\n    if (!newComment.trim()) return;\r\n    await supabase.from('comments').insert({\r\n      signal_id: signalId,\r\n      user_id:    user.id,\r\n      content:    newComment.trim(),\r\n      parent_id:  null\r\n    });\r\n    setNewComment('');\r\n    fetchComments();\r\n  };\r\n\r\n  // --- 4) Yeni cevap ---\r\n  const postReply = async () => {\r\n    if (!replyText.trim() || !replyingTo) return;\r\n    await supabase.from('comments').insert({\r\n      signal_id: signalId,\r\n      user_id:    user.id,\r\n      content:    replyText.trim(),\r\n      parent_id:  replyingTo\r\n    });\r\n    setReplyText('');\r\n    setReplyingTo(null);\r\n    fetchComments();\r\n  };\r\n\r\n  // --- 5) Düzenleme ---\r\n  const startEdit = c => {\r\n    setEditingId(c.id);\r\n    setEditingText(c.content);\r\n  };\r\n  const saveEdit = async () => {\r\n    if (!editingText.trim()) return setEditingId(null);\r\n    await supabase\r\n      .from('comments')\r\n      .update({ content: editingText.trim() })\r\n      .eq('id', editingId);\r\n    setEditingId(null);\r\n    setEditingText('');\r\n    fetchComments();\r\n  };\r\n\r\n  // --- 6) Silme (modal üzerinden) ---\r\n  const confirmDelete = async () => {\r\n    if (!deleteTargetId) return;\r\n    await supabase\r\n      .from('comments')\r\n      .delete()\r\n      .eq('id', deleteTargetId);\r\n    setDeleteTargetId(null);\r\n    fetchComments();\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"comments-page loader\">Yükleniyor…</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"comments-page\">\r\n      <button className=\"back-btn\" onClick={() => navigate(-1)}>\r\n        <FaArrowLeft /> Geri\r\n      </button>\r\n      <h2>Yorumlar</h2>\r\n\r\n      <div className=\"comments-list\">\r\n        {comments.roots.length === 0 && (\r\n          <p className=\"empty\">Henüz yorum yok.</p>\r\n        )}\r\n        {comments.roots.map(c => (\r\n          <React.Fragment key={c.id}>\r\n            <CommentItem\r\n              comment={c}\r\n              isReply={false}\r\n              onReply={() => setReplyingTo(c.id)}\r\n              onEdit={() => startEdit(c)}\r\n              onDelete={() => setDeleteTargetId(c.id)}\r\n              editingId={editingId}\r\n              editingText={editingText}\r\n              setEditingText={setEditingText}\r\n              saveEdit={saveEdit}\r\n              profile={profile}\r\n            />\r\n\r\n            {/* cevap kutusu */}\r\n            {replyingTo === c.id && profile?.user_type === 'investor' && (\r\n              <div className=\"new-reply\">\r\n                <textarea\r\n                  placeholder=\"Cevap yaz...\"\r\n                  value={replyText}\r\n                  onChange={e => setReplyText(e.target.value)}\r\n                />\r\n                <button onClick={postReply}>\r\n                  <FaPaperPlane />\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* cevaplar */}\r\n            {(comments.repliesMap[c.id] || []).map(r => (\r\n              <CommentItem\r\n                key={r.id}\r\n                comment={r}\r\n                isReply={true}\r\n                onReply={() => setReplyingTo(r.id)}\r\n                onEdit={() => startEdit(r)}\r\n                onDelete={() => setDeleteTargetId(r.id)}\r\n                editingId={editingId}\r\n                editingText={editingText}\r\n                setEditingText={setEditingText}\r\n                saveEdit={saveEdit}\r\n                profile={profile}\r\n              />\r\n            ))}\r\n          </React.Fragment>\r\n        ))}\r\n      </div>\r\n\r\n      {/* yeni kök yorum */}\r\n      {profile?.user_type === 'investor' && (\r\n        <div className=\"new-comment\">\r\n          <textarea\r\n            placeholder=\"Yorum yaz...\"\r\n            value={newComment}\r\n            onChange={e => setNewComment(e.target.value)}\r\n          />\r\n          <button onClick={postComment}>\r\n            <FaPaperPlane />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* silme onay modalı */}\r\n      {deleteTargetId && (\r\n        <div className=\"modal-overlay\" onClick={() => setDeleteTargetId(null)}>\r\n          <div\r\n            className=\"modal-content\"\r\n            onClick={e => e.stopPropagation()}\r\n          >\r\n            <h3>Yorumu Sil</h3>\r\n            <p>Bu yorumu silmek istediğinize emin misiniz?</p>\r\n            <div className=\"modal-buttons\">\r\n              <button\r\n                className=\"modal-btn cancel\"\r\n                onClick={() => setDeleteTargetId(null)}\r\n              >\r\n                İptal\r\n              </button>\r\n              <button\r\n                className=\"modal-btn confirm\"\r\n                onClick={confirmDelete}\r\n              >\r\n                Sil\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Ayrık bir yorum kutusu bileşeni\r\nfunction CommentItem({\r\n  comment,\r\n  isReply,\r\n  onReply,\r\n  onEdit,\r\n  onDelete,\r\n  editingId,\r\n  editingText,\r\n  setEditingText,\r\n  saveEdit,\r\n  profile\r\n}) {\r\n  const time =\r\n    new Date(comment.created_at).toLocaleDateString() +\r\n    ' ' +\r\n    new Date(comment.created_at).toLocaleTimeString([], {\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n\r\n  return (\r\n    <div className={`comment-box${isReply ? ' reply' : ''}`}>\r\n      {editingId === comment.id ? (\r\n        <>\r\n          <textarea\r\n            className=\"edit-textarea\"\r\n            value={editingText}\r\n            onChange={e => setEditingText(e.target.value)}\r\n          />\r\n          <div className=\"edit-actions\">\r\n            <button onClick={() => setEditingText('')}>\r\n              <FaTimes />\r\n            </button>\r\n            <button onClick={saveEdit}>\r\n              <FaCheck />\r\n            </button>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"comment-header\">\r\n            <span className=\"author\">{comment.author}</span>\r\n            <span className=\"time\">{time}</span>\r\n          </div>\r\n          <div className=\"comment-body\">{comment.content}</div>\r\n          <div className=\"comment-actions\">\r\n            {profile?.user_type === 'investor' && (\r\n              <button className=\"act\" onClick={onReply}>\r\n                <FaReply /> Cevapla\r\n              </button>\r\n            )}\r\n            {comment.user_id === profile?.user_id && (\r\n              <>\r\n                <button className=\"act\" onClick={onEdit}>\r\n                  <FaEdit />\r\n                </button>\r\n                <button className=\"act delete\" onClick={onDelete}>\r\n                  <FaTrash />\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
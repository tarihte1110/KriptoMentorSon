{"ast":null,"code":"// src/components/Header.js\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{supabase}from'../lib/supabaseClient';import{avatarList}from'../utils/avatars';import logo from'../assets/images/logo.png';import'./Header.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Header(){const navigate=useNavigate();const[avatarSrc,setAvatarSrc]=useState(null);const[searchText,setSearchText]=useState('');useEffect(()=>{supabase.auth.getSession().then(async _ref=>{let{data:{session}}=_ref;const user=session===null||session===void 0?void 0:session.user;if(user){const{data:prof}=await supabase.from('profiles').select('avatar_url').eq('user_id',user.id).maybeSingle();if(prof!==null&&prof!==void 0&&prof.avatar_url){const item=avatarList.find(a=>a.id===prof.avatar_url);if(item)setAvatarSrc(item.image);}}});},[]);const handleKeyDown=async e=>{if(e.key!=='Enter')return;const q=searchText.trim();if(q.startsWith('@')){const name=q.slice(1).trim();const{data,error}=await supabase.from('profiles').select('user_id').eq('full_name',name).eq('user_type','trader').maybeSingle();if(error){console.error(error);alert('Bir hata oluÅŸtu.');}else if(!data){alert(`\"${name}\" adlÄ± trader bulunamadÄ±.`);}else{navigate(`/profile/${data.user_id}`);setSearchText('');}}// baÅŸka bir arama mantÄ±ÄŸÄ± eklemek isterseniz buraya\n};return/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-left\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"KriptoMentor Logo\",className:\"header-logo\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"header-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Arama...\",value:searchText,onChange:e=>setSearchText(e.target.value),onKeyDown:handleKeyDown})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-right\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"notif-btn\",title:\"Bildirimler\",children:\"\\uD83D\\uDD14\"}),avatarSrc?/*#__PURE__*/_jsx(\"img\",{src:avatarSrc,alt:\"Kullan\\u0131c\\u0131 Avatar\\u0131\",className:\"header-avatar-img\"}):/*#__PURE__*/_jsx(\"div\",{className:\"header-avatar-placeholder\",children:\"\\uD83D\\uDC64\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","avatarList","logo","jsx","_jsx","jsxs","_jsxs","Header","navigate","avatarSrc","setAvatarSrc","searchText","setSearchText","auth","getSession","then","_ref","data","session","user","prof","from","select","eq","id","maybeSingle","avatar_url","item","find","a","image","handleKeyDown","e","key","q","trim","startsWith","name","slice","error","console","alert","user_id","className","children","src","alt","type","placeholder","value","onChange","target","onKeyDown","title"],"sources":["C:/Users/Yusuf Uygur/Documents/GitHub/KriptoMentorSon/kriptoMentorWeb/frontend/src/components/Header.js"],"sourcesContent":["// src/components/Header.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../lib/supabaseClient';\r\nimport { avatarList } from '../utils/avatars';\r\nimport logo from '../assets/images/logo.png';\r\nimport './Header.css';\r\n\r\nexport default function Header() {\r\n  const navigate = useNavigate();\r\n  const [avatarSrc, setAvatarSrc] = useState(null);\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  useEffect(() => {\r\n    supabase.auth.getSession().then(async ({ data: { session } }) => {\r\n      const user = session?.user;\r\n      if (user) {\r\n        const { data: prof } = await supabase\r\n          .from('profiles')\r\n          .select('avatar_url')\r\n          .eq('user_id', user.id)\r\n          .maybeSingle();\r\n        if (prof?.avatar_url) {\r\n          const item = avatarList.find(a => a.id === prof.avatar_url);\r\n          if (item) setAvatarSrc(item.image);\r\n        }\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const handleKeyDown = async (e) => {\r\n    if (e.key !== 'Enter') return;\r\n    const q = searchText.trim();\r\n    if (q.startsWith('@')) {\r\n      const name = q.slice(1).trim();\r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .select('user_id')\r\n        .eq('full_name', name)\r\n        .eq('user_type', 'trader')\r\n        .maybeSingle();\r\n      if (error) {\r\n        console.error(error);\r\n        alert('Bir hata oluÅŸtu.');\r\n      } else if (!data) {\r\n        alert(`\"${name}\" adlÄ± trader bulunamadÄ±.`);\r\n      } else {\r\n        navigate(`/profile/${data.user_id}`);\r\n        setSearchText('');\r\n      }\r\n    }\r\n    // baÅŸka bir arama mantÄ±ÄŸÄ± eklemek isterseniz buraya\r\n  };\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header-left\">\r\n        <img src={logo} alt=\"KriptoMentor Logo\" className=\"header-logo\" />\r\n      </div>\r\n      <div className=\"header-center\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"search-input\"\r\n          placeholder=\"Arama...\"\r\n          value={searchText}\r\n          onChange={e => setSearchText(e.target.value)}\r\n          onKeyDown={handleKeyDown}\r\n        />\r\n      </div>\r\n      <div className=\"header-right\">\r\n        <button className=\"notif-btn\" title=\"Bildirimler\">ðŸ””</button>\r\n        {avatarSrc ? (\r\n          <img\r\n            src={avatarSrc}\r\n            alt=\"KullanÄ±cÄ± AvatarÄ±\"\r\n            className=\"header-avatar-img\"\r\n          />\r\n        ) : (\r\n          <div className=\"header-avatar-placeholder\">ðŸ‘¤</div>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}